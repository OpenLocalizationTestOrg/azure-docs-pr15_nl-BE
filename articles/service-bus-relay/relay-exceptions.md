<properties 
    pageTitle="Relay-uitzonderingen | Microsoft Azure"
    description="De lijst met uitzonderingen voor Relay en voorgestelde acties."
    services="service-bus"
    documentationCenter="na"
    authors="jtaubensee"
    manager="timlt"
    editor="tysonn" />
<tags 
    ms.service="service-bus"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="10/28/2016"
    ms.author="jotaub" />

# <a name="relay-exceptions"></a>Relay-uitzonderingen

In dit artikel worden enkele uitzonderingen die zijn gegenereerd door de API's van Microsoft Azure Relay. Deze verwijzing kan worden gewijzigd, dus controleer regelmatig op updates.

## <a name="exception-categories"></a>Uitzondering categorieën

De Relay-API genereren uitzonderingen die in de volgende categorieën, samen met de gekoppelde actie die u nemen kunt om te proberen valt om de problemen op te lossen.

1.  De gebruiker code fout ([System.ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx), [System.InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx), [System.OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx), [System.Runtime.Serialization.SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx)). Algemene actie: probeer te herstellen, de code voordat u verdergaat.

2.  Fout in Setup/configuratie ([Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitynotfoundexception.aspx), [System.UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx). Algemene actie: Controleer uw configuratie en indien nodig wijzigen.

3.  Tijdelijke uitzonderingen ([Microsoft.ServiceBus.Messaging.MessagingException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx), [Microsoft.ServiceBus.Messaging.ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx), [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingcommunicationexception.aspx)). Algemene actie: probeer het opnieuw of om gebruikers te informeren.

4.  Andere uitzonderingen ([System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx), [System.TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx), [Microsoft.ServiceBus.Messaging.MessageLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagelocklostexception.aspx), [Microsoft.ServiceBus.Messaging.SessionLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessionlocklostexception.aspx)). Algemene actie: specifiek voor het uitzonderingstype; Zie de tabel in de volgende sectie. 

## <a name="exception-types"></a>Uitzondering typen

De volgende tabel worden de typen berichten uitzondering, en hun oorzaken en notities van de voorgestelde actie die u kunt ondernemen.

| **Uitzonderingstype**                                                                                                                                                                                                                                                                                | **Oorzaak-beschrijving/voorbeelden**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | **Voorgestelde actie**                                                                                                                                                                                                                                                                                                                                                                                                          | **Let op automatisch/onmiddellijk opnieuw**                                                                                             |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx)                                                                                                                                                                                                           | De server reageert niet op de gewenste bewerking binnen de opgegeven tijd die wordt beheerd door [OperationTimeout](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout.aspx). De server kan de gevraagde bewerking hebt voltooid. Dit kan gebeuren door het netwerk andere vertragingen infrastructuur.                                                                                                                                                                                                                                                                   | De systeemstatus op consistentie controleren en indien nodig opnieuw. [Time-out voor uitzonderingen](#timeoutexception)Zie.                                                                                                                                                                                                                                                                                                                                                           | Opnieuw kan helpen in sommige gevallen; opnieuw logica toevoegen aan code.                                                                      |
| [InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx)                                                                                                                                                                                         | De aangevraagde gebruikersbewerking is niet toegestaan op de server of service. Zie het uitzonderingsbericht voor meer informatie. [Volledig](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage.complete.aspx) wordt bijvoorbeeld deze uitzondering gegenereerd als het bericht is ontvangen in de **ReceiveAndDelete** modus.                                                                                                                                                                                                                                                                                                     | Controleer de code en de documentatie. Zorg ervoor dat de gevraagde bewerking is ongeldig.                                                                                                                                                                                                                                                                                                                                         | Opnieuw helpt niet.                                                                                                          |
| [OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx)                                                                                                                                                                                       | Wordt geprobeerd om op te roepen van een bewerking op een object dat al is gesloten, afgebroken of verwijderd. In zeldzame gevallen is ambient transactie al verwijderd.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | De code controleren en controleer of dat er wordt geen gebruikgemaakt van bewerkingen op een verwijderd object.                                                                                                                                                                                                                                                                                                                                          | Opnieuw helpt niet.                                                                                                          |
| [UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)                                                                                                                                                                                     | Een token kan niet verkrijgen van het object [TokenProvider](https://msdn.microsoft.com/library/azure/microsoft.servicebus.tokenprovider.aspx) , het token is ongeldig of het token bevat niet de claims die zijn vereist voor het uitvoeren van de bewerking.                                                                                                                                                                                                                                                                                                                                                                                                  | Zorg ervoor dat de token provider is gemaakt met de juiste waarden. Controleer de configuratie van de Access Control-service.                                                                                                                                                                                                                                                                                                   | Opnieuw kan helpen in sommige gevallen; opnieuw logica toevoegen aan code.                                                                      |
| [ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx)<br /> [ArgumentNullException](https://msdn.microsoft.com/library/system.argumentnullexception.aspx)<br />[ArgumentOutOfRangeException](https://msdn.microsoft.com/library/system.argumentoutofrangeexception.aspx) | Een of meer argumenten doorgegeven aan de methode zijn ongeldig.<br /> De URI opgegeven aan [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) of [maken](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) bevat segmenten de betreffende bedrijfsactiviteit pad.<br /> De URI-schema opgegeven [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) te [maken](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) , is ongeldig. <br />De waarde van de eigenschap is groter dan 32KB. | De aanroepende code controleren en zorg ervoor dat de argumenten juist zijn.                                                                                                                                                                                                                                                                                                                                                           | Opnieuw helpt niet.                                                                                                          |
| [ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx)                                                                                                                                                                       | Service kan niet op dit moment de aanvraag niet verwerken.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Client kunt wachten op een bepaalde tijdsperiode en vervolgens de bewerking opnieuw.                                                                                                                                                                                                                                                                                                                                                           | Client kan na een bepaalde interval opnieuw. Als u een nieuwe poging resulteert in een andere uitzondering, controleer opnieuw gedrag van die uitzondering. |
| [QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)                                                                                                                                                                 | De SMS-dienst heeft de toegestane maximumgrootte bereikt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ruimte maken in de entiteit ontvangen van de entiteit of de onderliggende wachtrijen. Zie [QuotaExceededException](#quotaexceededexception).                                                                                                                                                                                                                                                                                                                                      | Opnieuw kan helpen als u berichten in de tussentijd zijn verwijderd.                                                               |
| [MessageSizeExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagesizeexceededexception.aspx)                                                                                                                                                     | Een nettolading bericht bevat meer dan 256 kB. Houd er rekening mee dat de limiet van 256 k is de totale berichtgrootte, waaronder Systeemeigenschappen en alle .NET-overhead.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | De grootte van de nettolading van het bericht beperken en probeer de bewerking opnieuw.                                                                                                                                                                                                                                                                                                                                                         | Opnieuw helpt niet.                                                                                                          |

## <a name="quotaexceededexception"></a>QuotaExceededException

[QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx) geeft aan dat een voor een specifieke entiteit is overschreden.

Deze uitzondering loopt voor het doorsturen van E-mail, de [System.ServiceModel.QuotaExceededException](https://msdn.microsoft.com/library/system.servicemodel.quotaexceededexception.aspx), die aangeeft dat het maximum aantal luisteraars voor dit eindpunt is overschreden. Dit wordt aangegeven in de **MaximumListenersPerEndpoint** -waarde van de uitzondering weergegeven.

## <a name="timeoutexception"></a>TimeoutException 

Een [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx) geeft aan dat een gebruiker aangestuurde bewerking langer dan de time-out van de bewerking duurt. 

U moet de waarde van de eigenschap [ServicePointManager.DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit) , kunt u door op deze limiet kan ook de oorzaak een [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx)controleren.

Voor het doorsturen van E-mail ontvangt u mogelijk uitzonderingen time-out bij het openen van een afzender relay-verbinding eerst. Er zijn twee veel voorkomende oorzaken voor deze uitzondering:

1. De waarde van de [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) mogelijk te klein is (zelfs voor een fractie van een seconde).
2. De relay op gebouwen listener(s) mogelijk niet meer reageert (of mogelijk problemen firewall regels verbieden de listeners nieuwe clientverbindingen accepteert) en de waarde [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) is minder dan 20 seconden.

Bijvoorbeeld:

```
'System.TimeoutException’: The operation did not complete within the allotted timeout of 00:00:10. The time allotted to this operation may have been a portion of a longer timeout.
```

### <a name="common-causes"></a>Veelvoorkomende oorzaken

Er zijn twee veel voorkomende oorzaken voor deze fout: onjuiste configuratie of een tijdelijke servicefout.

1. **Onjuiste configuratie** 
    de time-out van de bewerking mogelijk te klein voor de operationele toestand. De standaardwaarde voor de time-out van de bewerking in de client-SDK is 60 seconden. Controleer of uw code bevat de waarde die is ingesteld op iets te klein. Houd er rekening mee dat de tijd die nodig is voor een bepaalde bewerking is voltooid, zodat de time-out van de bewerking mag niet worden ingesteld op een zeer kleine waarde kan zijn voor de toestand van het netwerk en het CPU-gebruik.

2. **Fout in de service tijdelijk** 
    soms Relay kunnen vertragingen bij het verwerken van aanvragen; bijvoorbeeld, tijdens drukke perioden. In dergelijke gevallen kunt u de bewerking na een vertraging opnieuw proberen totdat de bewerking voltooid is. Als u dezelfde bewerking zijn nog steeds niet na meerdere pogingen, gaat u naar de [Azure site met de status](https://azure.microsoft.com/status/) te controleren op eventuele bekende storingen.

## <a name="next-steps"></a>Volgende stappen:

- [Veelgestelde vragen over doorsturen](relay-faq.md)
- [Een naamruimte maken](relay-create-namespace-portal.md)
- [Aan de slag met .NET](relay-hybrid-connections-dotnet-get-started.md)
- [Aan de slag met het knooppunt](relay-hybrid-connections-node-get-started.md)