<properties
   pageTitle="Algemene richtlijnen opnieuw | Microsoft Azure"
   description="Advies voor nieuwe pogingen voor het afhandelen van fouten van voorbijgaande aard."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="retry-general-guidance"></a>Algemene richtlijnen opnieuw

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>Overzicht

Alle toepassingen die met externe services en resources communiceren moet gevoelig voor fouten van voorbijgaande aard zijn. Dit is vooral het geval voor toepassingen die worden uitgevoerd in de cloud, waarbij de aard van de omgeving en de verbinding via het Internet betekent dat deze soorten fouten zijn waarschijnlijk vaker worden geconfronteerd. Fouten van voorbijgaande aard zijn de momentele geen netwerkverbinding op onderdelen en services, de tijdelijke onbeschikbaarheid van een service of time-outs die ontstaan wanneer een service bezet is. Deze storingen zijn vaak zelf corrigeren en als de actie wordt herhaald na een geschikte vertraging is waarschijnlijk mislukt.

Dit document heeft betrekking op algemene richtlijnen voor het afhandelen van fouten van voorbijgaande aard. Voor meer informatie over het afhandelen van fouten van voorbijgaande aard als Microsoft Azure services Zie [Azure service-specifieke richtlijnen voor opnieuw proberen](best-practices-retry-service-specific.md).

## <a name="why-do-transient-faults-occur-in-the-cloud"></a>Waarom tijdelijke fouten zich voordoen in de cloud?

Tijdelijke fouten kunnen optreden in elke omgeving, op elk platform of besturingssysteem, en in elk soort toepassing. In oplossingen uitgevoerd op lokaal, op lokalen, infrastructuur, prestaties en beschikbaarheid van de toepassing en de bijbehorende onderdelen meestal blijven behouden dankzij de redundantie van dure en vaak onder-hardware en zijn onderdelen en bronnen bevinden zich dicht bij elkaar een andere. Hierdoor worden een storing minder waarschijnlijk, het kan nog steeds leiden tot tijdelijke fouten- en zelfs een storing door middel van onvoorziene gebeurtenissen zoals externe voeding of netwerkproblemen of andere herstel na storing scenario's.

Cloud hosting, inclusief persoonlijke cloud systemen, biedt een betere algehele beschikbaarheid met behulp van gedeelde bronnen, redundantie, automatische failover en dynamische brontoewijzing over een groot aantal computerknooppunten grondstoffen. De aard van deze omgevingen kan echter betekenen dat de fouten van voorbijgaande aard vaker zijn voor. Er zijn verschillende redenen voor:

* Veel bronnen in een cloud-omgeving worden gedeeld en de toegang tot deze bronnen kan beperken ter bescherming van de bron. Sommige services weigert de verbindingen wanneer de belasting naar een bepaald niveau stijgt of een maximale doorvoersnelheid is bereikt, teneinde de verwerking van aanvragen van bestaande en onderhouden van de service voor alle gebruikers. Helpt bij te houden van de kwaliteit van de service voor buren en andere huurders met behulp van de gedeelde netwerkbron beperken.
* Cloud-omgevingen zijn gebouwd met behulp van grote aantallen grondstoffen hardware-eenheden. Ze bieden de prestaties door de belasting dynamisch te distribueren op meerdere computers eenheden en onderdelen van de infrastructuur en betrouwbaarheid bieden door automatisch recycling of vervanging van eenheden mislukt. Deze dynamische aard betekent dat fouten van voorbijgaande aard en tijdelijk verbindingsfouten kunnen af en toe.
* Vaak zijn er meer hardwareonderdelen, met inbegrip van de netwerkinfrastructuur, zoals routers en Netwerktaakverdeling tussen de toepassing en de bronnen en services die worden gebruikt. Deze aanvullende infrastructuur kan af en toe leiden tot extra verbinding latentie en tijdelijke verbinding fouten.
* Netwerkomstandigheden tussen de client en de server mogelijk variabele, met name wanneer communicatie Internet kruist. Zelfs in locaties voor gebouwen, verkeer zeer zware ladingen vertraagt de communicatie en veroorzaken problemen met de verbinding.

## <a name="challenges"></a>Uitdagingen
Fouten van voorbijgaande aard kunnen een grote invloed hebben op de waargenomen beschikbaarheid van een toepassing, zelfs als deze grondig zijn getest onder alle te verwachten omstandigheden. Cloud-toepassingen werken op betrouwbare wijze, zodat moeten zij reageren op de uitdagingen van het volgende:

* De toepassing moet kunnen fouten detecteren wanneer ze zich voordoen, en bepalen of deze fouten zijn waarschijnlijk tijdelijke, meer duurzame of terminal fouten hebben voorgedaan. Andere bronnen zijn waarschijnlijk verschillende antwoorden als resultaat wanneer een storing optreedt en deze antwoorden ook afhankelijk van de context van de bewerking verschillen kunnen. bijvoorbeeld afwijken de reactie op een fout bij het lezen van opslag van het antwoord op een fout bij het schrijven naar de opslag. Veel bronnen en services hebben goed gedocumenteerde tijdelijke storing contracten. Echter kan waar deze informatie niet beschikbaar is, het moeilijk zijn te ontdekken, de aard van de fout en of het is waarschijnlijk slechts tijdelijk van aard.
* De toepassing moet kunnen de bewerking opnieuw als er is vastgesteld dat de fout is waarschijnlijk slechts tijdelijk van aard en bijhouden hoe vaak die de bewerking opnieuw is uitgevoerd.
* De toepassing moet een passende strategie voor de pogingen gebruiken. Deze strategie geeft aan hoe vaak het opnieuw moet proberen, de vertraging tussen elke poging en acties te nemen na een mislukte poging. Het juiste aantal pogingen en de vertraging tussen elkaar zijn vaak moeilijk te bepalen en is afhankelijk van het type resource als de huidige operationele toestand van de resource en de toepassing zelf.

## <a name="general-guidelines"></a>Algemene richtlijnen
De volgende richtlijnen kunt u een geschikte tijdelijke storing afleveren mechanisme voor uw toepassingen te ontwerpen:

* **Bepalen of er een mechanisme ingebouwde opnieuw:**
  * Veel services bieden een SDK- of bibliotheek met een tijdelijke storing mechanisme voor de afhandeling. Het nieuwe beleid dat wordt gebruikt is meestal die zijn toegesneden op de aard en de eisen van het target-service. REST-interfaces voor services kunnen ook informatie die is handig om te bepalen of een nieuwe poging is passend en hoe lang moet worden gewacht voordat de volgende nieuwe poging terug.
  * Gebruik de ingebouwde opnieuw mechanisme waar een wordt tenzij er specifieke en eenduidige eisen die leiden tot dat een verschillende opnieuw gedrag is meer geschikt.
* **Bepalen als de bewerking geschikt voor opnieuw proberen is**:
  * U moet alleen bewerkingen opnieuw proberen de fouten zijn tijdelijke (meestal aangegeven door de aard van de fout) en als er op zijn minst enige kans dat de bewerking slaagt als reattempted. Er is geen enkel punt in het opnieuw proberen van bewerkingen die wijzen op een ongeldige bewerking zoals een database bijwerken naar een artikel dat niet bestaat, of de aanvragen voor een service of een bron die een onherstelbare fout heeft geleden
  * In het algemeen moet u implementeren pogingen alleen het volledige effect van deze kan worden bepaald, waarbij de voorwaarden zijn duidelijk en kunnen worden gevalideerd. Als dit niet het geval is, laat het aan de aanroepende code voor het implementeren van nieuwe pogingen. Houd er rekening mee dat de fouten die worden geretourneerd uit de middelen van diensten buiten uw macht kunnen mettertijd veranderen en moet u terugkeren naar uw tijdelijke storing detectielogica.
  * Wanneer u services of onderdelen maakt, kunt u uitvoering van foutcodes en berichten, zodat clients bepalen of ze moeten opnieuw mislukte bewerkingen. In het bijzonder geven als de client moet de bewerking proberen (bijvoorbeeld door een **isTransient** -waarde retourneren) en voorstellen van een geschikte vertraging optreden voordat de volgende nieuwe poging. Als u een webservice maakt, kunt u aangepaste fouten die worden gedefinieerd binnen de servicecontracten te retourneren. Hoewel algemene clients niet mogelijk deze te lezen, zullen ze nuttig zijn bij het maken van aangepaste clients.
* **Bepaal een aantal passende nieuwe pogingen en interval:**
  * Het is essentieel om het aantal nieuwe pogingen en het interval voor het type use-case te optimaliseren. Als u niet een voldoende aantal keren proberen doen, de toepassing kan de bewerking niet voltooien en is waarschijnlijk een fout. Als u te vaak opnieuw proberen, of met een te korte interval tussen probeert, de toepassing mogelijk bronnen als threads, verbindingen en geheugen kan bevatten gedurende lange perioden die zal nadelig zijn voor de gezondheid van de toepassing.
  * De juiste waarden voor het tijdsinterval en het aantal nieuwe pogingen is afhankelijk van het soort bewerking wordt uitgevoerd. Bijvoorbeeld, als de bewerking deel van een interactie met de gebruiker uitmaakt, het interval moeten korte en slechts een paar pogingen heeft geprobeerd te voorkomen moeten gebruikers wachten op een reactie (die bezit verbindingen openen en de beschikbaarheid van andere gebruikers kunt beperken). Als de bewerking onderdeel van een werkstroom lang uitgevoerd of kritieke waarop annuleren en opnieuw starten van het proces is dure of tijdrovend is, is het dienstig meer wachttijd tussen de pogingen en meerdere keren opnieuw proberen.
  * Bepalen van de juiste intervallen tussen nieuwe pogingen is het moeilijkste onderdeel van het ontwerp van een succesvolle strategie. Typische strategieën gebruikt de volgende typen van het interval voor opnieuw proberen:
      * **Exponentiële back-off**. De toepassing wacht even voordat de eerste poging en tussen elke opeenvolgende pogingen exponentieel vergroten. Het kan bijvoorbeeld, probeer het opnieuw na 3 seconden 12 seconden, 30 seconden, enzovoort.
      * **Incrementele intervallen**. De toepassing wacht even voordat de eerste poging en vervolgens oplopend tussen elke opeenvolgende pogingen. Het kan bijvoorbeeld, probeer het opnieuw na 3 seconden, 7 seconden, 13 seconden, enzovoort.
      * **Regelmatige intervallen**. Het wachten tussen elke poging de dezelfde periode. Het kan bijvoorbeeld, probeer het opnieuw elke 3 seconden.
      * **Direct opnieuw proberen**. Een tijdelijke fout is soms zeer korte misschien veroorzaakt door een gebeurtenis zoals een netwerk pakket botsing of een knelpunt in een hardware-onderdeel. In dit geval is het opnieuw onmiddellijk geschikt omdat het van slagen kans als de fout in de tijd die nodig is de toepassing te assembleren en verzendt de volgende aanvraag is verwerkt. Echter er nooit meer dan één direct nieuwe poging wordt en moet u overschakelen naar alternatieve strategieën, zoals bijvoorbeeld exponentiële back-off of terugval acties, als de onmiddellijke poging mislukt.
      * **Aselecte indeling**. Een van de strategieën hierboven vermelde opnieuw kunnen een aselecte indeling om te voorkomen dat meerdere exemplaren van de client verzenden van latere nieuwe pogingen op hetzelfde moment bevatten. Bijvoorbeeld één instantie kan de bewerking opnieuw proberen na 3 seconden, 11 seconden, 28 seconden, enzovoort terwijl een ander exemplaar kan de bewerking opnieuw na 4 seconden 12 seconden, 26 seconden, enzovoort. Aselecte indeling is een handige techniek die kan worden gecombineerd met andere strategieën.  
  * Normaal gesproken een exponentiële strategie voor back-off worden gebruikt voor bewerkingen op de achtergrond en onmiddellijke of regelmatige interval opnieuw strategieën voor interactieve bewerkingen. In beide gevallen moet u de vertraging en het aantal nieuwe pogingen zodat de maximale vertraging voor alle herhalingspogingen binnen de vereiste end-to-end-vertraging.
  * Rekening gehouden met de combinatie van alle factoren die tot de maximale time-out voor een bewerking opnieuw geprobeerd bijdragen. Deze factoren zijn de tijd die nodig is voor een mislukte verbinding met het produceren van een antwoord (meestal ingesteld door een time-outwaarde op de client) en de vertraging tussen nieuwe pogingen en het maximum aantal pogingen. Zeer grote algemene bewerking tijden, met name wanneer met behulp van een exponentiële vertraging strategie waarbij het interval tussen pogingen snel na elke fout groeit kan leiden tot het totaal van alle tijden. Als een proces moet voldoen aan een specifieke service level agreement (SLA), moet de totale bewerkingstijd, inclusief alle time-outs en vertragingen worden binnen die gedefinieerd in de SLA
  * Over-Aggressive opnieuw-strategieën die intervallen te kort of te kunnen nieuwe pogingen, kan een nadelig effect op de doelbron of service. Dit kan voorkomen dat de bron of service herstellen in de toestand van overbelaste en zal blijven blokkeren of verzoeken te weigeren. Dit resulteert in een vicious cirkel waar meer en meer aanvragen worden verzonden naar de bron of service en bijgevolg de mogelijkheid om te herstellen is verder verminderd.
  * Rekening gehouden met de time-out van de bewerkingen bij het kiezen van de intervallen voor nieuwe pogingen om te voorkomen dat een volgende poging onmiddellijk (bijvoorbeeld als de time-outperiode is vergelijkbaar met het interval voor opnieuw proberen) te starten. Let ook op als u wilt de totale mogelijke periode (de time-out plus de intervallen voor nieuwe pogingen) onder een specifieke totale tijd houden. Bewerkingen met buitengewoon korte of lange time-outs invloed kunnen hebben op hoe lang te wachten en hoe vaak de bewerking opnieuw.
  * Het type van de uitzondering en geen gegevens bevat, of de foutcodes en berichten geretourneerd van de service, gebruiken om het interval en het aantal pogingen te optimaliseren. Voor bijvoorbeeld bepaalde uitzonderingen of fout codes (zoals het HTTP code 503 Service niet beschikbaar met een header opnieuw na de reactie) aangeven kunnen hoe lang de fout kan duren, of dat is de service is mislukt en niet reageert op een volgende poging.
* **Voorkom anti patronen**:
  * In de meeste gevallen geen implementaties met gedupliceerde lagen van de code opnieuw. Modellen die trapsgewijs opnieuw mechanismen bevatten of die opnieuw in elke fase van een bewerking die betrekking heeft op een hiërarchie van aanvragen, tenzij u specifieke vereisten die vraag hebt implementeren dit vermijden. Met een beleid dat buitensporige aantal pogingen en perioden van vertraging te voorkomen en zorg ervoor dat de gevolgen in deze uitzonderlijke omstandigheden. Als één onderdeel een aanvraag naar een andere, probeert in totaal voor de service die vervolgens toegang tot de target-service en u opnieuw met een telling van drie op beide gesprekken zullen er implementeren negen opnieuw. Veel services en bronnen een mechanisme ingebouwde opnieuw implementeren en u moet onderzoeken hoe uitschakelen of wijzigen als u wilt implementeren pogingen op een hoger niveau.
  *  Nooit een mechanisme voor de eindeloze opnieuw implementeren. Dit is waarschijnlijk de bron of service herstellen van problemen met overbelasting te voorkomen en ervoor zorgen dat de beperking en geweigerde verbindingen blijven voor een langere periode. Gebruik een eindig aantal of pogingen of implementeren van een patroon zoals [stroomonderbreker](http://msdn.microsoft.com/library/dn589784.aspx) om de service te herstellen.
  * Nooit meer dan één keer een direct opnieuw uitvoeren.
  * Vermijd het gebruik van een interval regelmatig nieuwe, met name wanneer een groot aantal nieuwe pogingen, bij de toegang tot services en bronnen in Azure. De optimale aanpak wordt dat dit scenario is een exponentiële back-off-strategie met een circuit laatste mogelijkheid.
  * Voorkomen dat meerdere exemplaren van dezelfde client of meerdere exemplaren van verschillende clients, pogingen op hetzelfde moment te verzenden. Een aselecte indeling in de intervallen voor nieuwe pogingen als zullen optreden.
* **Het opnieuw strategie en de implementatie testen:**
  * Zorg ervoor dat u de implementatie van de strategie opnieuw onder als breed een reeks omstandigheden mogelijk volledig test vooral wanneer zowel de toepassing en de doel-bronnen of services die wordt gebruikt bij extreme belasting. Als u wilt controleren gedrag tijdens de test, kunt u het volgende doen:
      * Fouten van voorbijgaande aard en tijdelijke injecteren in de service. Bijvoorbeeld ongeldige aanvragen verzenden of code toevoegen die de test aanvraagt en reageert met verschillende soorten fouten worden gevonden. Zie voor een voorbeeld met behulp van TestApi, [Veroorzaakt het testen injecties met TestApi](http://msdn.microsoft.com/magazine/ff898404.aspx) en [Inleiding tot TestApi – deel 5: beheerde Code veroorzaakt injectie API's](http://blogs.msdn.com/b/ivo_manolov/archive/2009/11/25/9928447.aspx).
      * Maak een afbeelding overtrekken van de bron of service geeft als resultaat een reeks fouten die in de echte service resulteren kan. Dekking van alle soorten fout garanderen dat uw strategie opnieuw is ontworpen om te detecteren.
      * Ervoor zorgen dat tijdelijke fouten optreden door overbelasting van de service als deze is een aangepaste service die u hebt gemaakt en geïmplementeerd of tijdelijk uitschakelen (u moet, natuurlijk niet alle gedeelde netwerkbronnen overbelasten of gedeelde services in Azure).
      * Kunt u de bibliotheek FiddlerCore in uw automatische tests met het resultaat van een HTTP-aanvragen, wijzigen door extra roundtrip keren toe te voegen of door het wijzigen van het antwoord (bijvoorbeeld de HTTP-statuscode, koptekst, hoofdtekst of andere factoren) voor HTTP-gebaseerde API's. Hierdoor deterministic testen van een subset van de storingen of tijdelijke fouten of andere soorten storingen. Zie [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore)voor meer informatie. Bekijk de [broncode voor de opslag Azure SDK](https://github.com/Azure/azure-storage-net/tree/master/Test)voor voorbeelden van het gebruik van de bibliotheek, met name de **HttpMangler** klasse.
      * Hoge belasting factor en gelijktijdige tests om ervoor te zorgen dat het mechanisme opnieuw en strategie werkt naar behoren onder deze omstandigheden, en heeft geen nadelige gevolgen hebben voor de werking van de client en kruisbesmetting tussen aanvragen veroorzaken uitvoeren.
* **Opnieuw beleidsconfiguraties beheren:**
  * Een _beleid proberen_ is een combinatie van alle elementen van uw strategie opnieuw. Hiermee definieert u het detectiemechanisme die bepaalt of er een fout is waarschijnlijk slechts tijdelijk van aard, het type interval u wilt gebruiken (zoals normaal, exponentiële back-off en aselecte indeling), de werkelijke interval waarde(n) en het aantal keren opnieuw uit te voeren.
  * Nieuwe pogingen moeten worden geïmplementeerd op vele plaatsen op zelfs de meest eenvoudige toepassing en in elke laag van complexe toepassingen. In plaats van hard te coderen de elementen van elk beleid op meerdere locaties, kunt u overwegen een centraal punt voor het opslaan van alle beleidsregels. Bijvoorbeeld slaan de waarden zoals het interval opnieuw tellen in de configuratiebestanden toepassing, ze lezen tijdens runtime en het beleid opnieuw via programmering samenstellen. Dit maakt het gemakkelijker voor het beheren van de instellingen te wijzigen en verbeteren van de waarden om te kunnen reageren op veranderende behoeften en scenario's. Echter, de waarden worden opgeslagen in plaats van een configuratie opnieuw gelezen telkens wanneer het bestand en controleer of de geschikte standaardwaarden worden gebruikt als de waarden niet kunnen worden verkregen uit de configuratie van het systeem ontwerpen.
  * In een toepassing Azure Cloud Services op te slaan van de waarden die worden gebruikt voor het beleid opnieuw tijdens runtime in het configuratiebestand van de service te maken zodat ze kunnen worden gewijzigd zonder de toepassing opnieuw starten.
  * Profiteer van ingebouwde of standaard opnieuw strategieën beschikbaar in de client-API gebruiken, maar alleen indien zij geschikt voor uw scenario zijn. Deze strategieën worden meestal voor algemene doeleinden. In sommige gevallen moeten alle vereiste kunnen worden, maar in andere scenario's niet bieden de volledige reeks opties aanpassen aan uw specifieke vereisten. U moet begrijpen hoe de instellingen van uw toepassing worden getest om te bepalen van de meest geschikte waarden zal beïnvloeden.
* **Registreren en bijhouden van fouten van voorbijgaande aard en tijdelijke:**
  * Opnemen als onderdeel van uw strategie opnieuw verwerken van uitzonderingen en andere instrumenten die zich aanmeldt als nieuwe pogingen worden gedaan. Terwijl een incidentele tijdelijke storing en opnieuw zijn te verwachten, en wijzen niet op een probleem, regelmatige en toenemende aantal pogingen zijn vaak een indicatie van een probleem dat kan leiden tot een storing of is momenteel invloed op prestaties en beschikbaarheid.
  * Meld fouten van voorbijgaande aard als waarschuwing posten en niet als foutieve posten, zodat de bewakingssystemen niet door ze als fouten waardoor vals alarm.
  * Kunt u een waarde op te slaan in de vermeldingen in het logboek dat als de pogingen werden veroorzaakt door beperken in de service, of door andere soorten fouten zoals verbindingsfouten, zodat u ze kunt onderscheiden tijdens de analyse van de gegevens aangeeft. Een toename van het aantal fouten bandbreedteregeling is vaak een indicatie van een ontwerp fout in de toepassing of de noodzaak om over te schakelen naar een premium-service biedt specifieke hardware.  
  * Rekening houden met meten en is de totale tijd voor bewerkingen waarbij een mechanisme opnieuw te registreren. Dit is een goede indicatie van het totale effect van tijdelijke fouten op gebruiker responstijden, latentie proces en de efficiëntie van de use-cases van toepassing. Logboek voor het aantal pogingen is ook opgetreden goed begrip van de factoren die hebben bijgedragen aan de responstijd.
  * Uitvoering van een Telemetrie en monitoring systeem dat waarschuwingen wanneer het aantal kunt verhogen en het aantal fouten, het gemiddelde aantal pogingen of het verhogen van de totale tijden voor bewerkingen te kunnen uitvoeren, zijn genomen.
* **Bewerkingen die niet voortdurend beheren:**
  * Er zijn omstandigheden waar de bewerking blijft bij elke poging mislukken en het is van cruciaal belang te overwegen hoe u deze situatie omgaan:
      * Hoewel een strategie opnieuw het maximum aantal keren dat een bewerking opnieuw moet worden uitgevoerd definieert, deze niet de toepassing bewerking opnieuw, met hetzelfde aantal nieuwe pogingen te herhalen. Bijvoorbeeld als een order processing service met een fatale fout die permanent buiten werking zet mislukt, kan de strategie opnieuw een time-out van verbinding detecteren en beschouwen als een tijdelijke storing worden. De code wordt de werking van een bepaald aantal keren opnieuw proberen en vervolgens geven. Echter wanneer er een andere klant plaatst een order, wordt de bewerking geprobeerd opnieuw - ook al dit zeker is niet elke keer.
      * Overweeg de implementatie van de [stroomonderbreker patroon](http://msdn.microsoft.com/library/dn589784.aspx)om te voorkomen dat een voortdurende pogingen voor bewerkingen die niet voortdurend. In dit patroon, als het aantal fouten binnen een bepaalde tijd groter is dan de drempelwaarde, worden aanvragen geretourneerd naar de aanroeper onmiddellijk als fouten zonder dat u probeert toegang te krijgen tot de bron mislukt of service.
      * De toepassing kan de service op periodieke basis en lange intervallen tussen de aanvragen te detecteren wanneer er beschikbaar aanbiedingen regelmatig testen. Een adequate wachttijd is afhankelijk van het scenario, zoals de ernst van de bewerking en de aard van de dienst, en kan van alles zijn een paar minuten tot enkele uren. Op het punt waar de test slaagt, de toepassing de normale werking hervatten en verzoeken doorgeven aan de zojuist herstelde service.
      * Ondertussen is het mogelijk terugvallen op een ander exemplaar van de service (bijvoorbeeld in een ander datacenter of toepassing), gebruikt een vergelijkbare service biedt functionaliteit voor compatibel (misschien eenvoudiger) of bepaalde andere bewerkingen uitvoeren in de hoop dat de service beschikbaar binnenkort komen. Bijvoorbeeld, het kan dienstig zijn voor het opslaan van aanvragen voor de service in een wachtrij of gegevens opslaan en deze later opnieuw afspelen. Anders kunt u mogelijk de gebruiker omleiden naar een andere instantie van de toepassing, verslechteren de prestaties van de toepassing, maar nog steeds acceptabel functionaliteit te bieden, of gewoon terug een bericht naar de gebruiker die aangeeft dat de toepassing niet beschikbaar is op aanwezig.

* **Andere overwegingen**
  * Bij het kiezen van de waarden voor het aantal pogingen en de intervallen voor nieuwe pogingen voor een beleid, moet u rekening houden als de bewerking op de service of de resource deel van een bewerking voor langdurige of meerdere stappen uitmaakt. Het is moeilijk of ter compensatie van alle andere operationele maatregelen die al zijn geslaagd als een dure mislukt. In dit geval is een zeer lange interval en een groot aantal nieuwe pogingen aanvaardbaar zolang andere bewerkingen worden niet geblokkeerd door de houder of vergrendelen van schaarse middelen.
  * U kunt als het dezelfde opnieuw kan er inconsistenties optreden in de gegevens. Als bepaalde onderdelen van een proces met meerdere stappen worden herhaald, en de bewerkingen niet idempotency is ingeschakeld, kan dit resulteren in een inconsistentie. Bijvoorbeeld, ontstaat een bewerking die een waarde wordt verhoogd als herhaald, een ongeldig resultaat. Herhalen van een bewerking die een bericht naar een wachtrij verzendt veroorzaken een inconsistentie in de consument bericht als er dubbele berichten niet kan detecteren. Om dit te voorkomen, ervoor te zorgen dat u elke stap als een bewerking idempotency is ingeschakeld ontwerpt. Zie voor meer informatie over idempotency [Idempotency patronen](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).
  * U kunt het bereik van de bewerkingen die wordt opnieuw geprobeerd. Het kan bijvoorbeeld code op een niveau dat verschillende bewerkingen omvat opnieuw te implementeren en ze allemaal opnieuw als een defect makkelijker zijn. Dit kan echter resulteren in idempotency problemen of onnodige ongedaan te maken bewerkingen.
  * Als u een bereik opnieuw die verschillende activiteiten omvat, rekening gehouden met de totale vertraging van alle van hen bij het bepalen van de intervallen voor nieuwe pogingen bij het controleren van de tijd en voordat u waarschuwingen voor storingen.
  * U kunt uw strategie opnieuw invloed van buren en andere huurders in een gedeelde toepassing of bij het gebruik van gedeelde bronnen en services. Opnieuw agressief beleid kunnen leiden tot een toenemend aantal tijdelijke fouten optreden voor deze andere gebruikers en toepassingen die services en bronnen delen. Uw toepassing kan ook worden beïnvloed door beleid opnieuw ingesteld door andere gebruikers van de bronnen en services. Voor bedrijfskritieke toepassingen, moet u besluiten gebruik Premieservices die niet worden gedeeld. Dit biedt u veel meer controle over de belasting en de daaruit voortvloeiende beperking van deze bronnen en services, kunnen u de extra kosten te rechtvaardigen.

## <a name="more-information"></a>Meer informatie

* [Azure servicespecifieke opnieuw richtlijnen](best-practices-retry-service-specific.md)
* [De blokkering van de toepassing tijdelijke fout afhandeling](http://msdn.microsoft.com/library/hh680934.aspx)
* [Patroon stroomonderbreker](http://msdn.microsoft.com/library/dn589784.aspx)
* [Compenserende transactie patroon](http://msdn.microsoft.com/library/dn589804.aspx)
* [Idempotency patronen](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/)
